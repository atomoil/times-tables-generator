<!DOCTYPE html>
<html>
<head>
	<title>Times Tables Generator</title>
</head>
<body>
Times Tables Generator
<template id="chooseLevelContainerTemplate">
<h2>Choose a Level</h2>
<div id="levelOptions"></div>
</template>

<template id="chooseLevelItem">
<a id="link" level="1" href="#" onClick="startLevel(this.attributes.level)"></a><br />
</template>

<template id="answerQuestionsTemplate">
<h2>Answer Questions</h2>
<div>[Timer goes here]</div>
<div id="questions"></div>
<a href="#" onClick="generateLevelChoices()">Go back to menu</a>
</template>

<template id="questionTemplate">
<div id="question"></div>
</template>

<div id="container">
</div>

<script type="text/javascript">

function generateLevelChoices() {
	clearContainer()

	var container = document.getElementById("container")

	var chooseLevelContainer = document.getElementById("chooseLevelContainerTemplate").content.cloneNode(true)
    var levelsGoHere = chooseLevelContainer.getElementById("levelOptions")
	var chooseLevelItem = document.getElementById("chooseLevelItem").content

	for( var i=1; i <= 11; i += 1) {
		var element = chooseLevelItem.cloneNode(true)
        element.getElementById("link").attributes.level = i
		element.getElementById("link").innerText = "Level " + i // could also do `Level ${i}`
		levelsGoHere.appendChild(element)
	}
    container.appendChild(chooseLevelContainer)
}

function clearContainer() {
    var container = document.getElementById("container")
    container.innerHTML = ""
}

function startLevel(level) {
	console.log("start level " + level)
    clearContainer()
	var options = optionsForLevel(level)
	var tables = generateTimesTables(options)
	displayTimesTables(tables)
}

function optionsForLevel(level) {
	if (level == 1) {
		return {total: 10, timesTables:[2], highestMultiplier: 10, lowestMultiplier: 1}
	} else if (level == 2) {
		return {total: 15, timesTables:[2, 10], highestMultiplier: 10, lowestMultiplier: 1}
	} else if (level == 3) {
		return {total: 20, timesTables:[2, 5, 10], highestMultiplier: 10, lowestMultiplier: 1}
	} else if (level == 4) {
		return {total: 25, timesTables:[2, 4, 5, 10], highestMultiplier: 10, lowestMultiplier: 1}
	} else if (level == 5) {
		return {total: 30, timesTables:[2, 4, 5, 8, 10], highestMultiplier: 11, lowestMultiplier: 1}
	} else if (level == 6) {
		return {total: 35, timesTables:[2, 3, 4, 5, 8, 10], highestMultiplier: 12, lowestMultiplier: 1}
	} else if (level == 7) {
		return {total: 40, timesTables:[2, 3, 4, 5, 6, 8, 10], highestMultiplier: 12, lowestMultiplier: 1}
	} else if (level == 8) {
		return {total: 45, timesTables:[2, 3, 4, 5, 6, 8, 9, 10], highestMultiplier: 12, lowestMultiplier: 1}
	} else if (level == 9) {
		return {total: 50, timesTables:[2, 3, 4, 5, 6, 7, 8, 9, 10], highestMultiplier: 12, lowestMultiplier: 1}
	} else if (level == 10) {
		return {total: 100, timesTables:[2, 3, 4, 5, 6, 7, 8, 9, 10], highestMultiplier: 12, lowestMultiplier: 1}
	} else if (level == 11) {
		return {total: 60, timesTables:[2, 3, 4, 5, 6, 7, 8, 9, 10, 11], highestMultiplier: 12, lowestMultiplier: 0}
	}
}

function generateTimesTables(options) {
	var total = options.total
	var timesTables = options.timesTables
	var highestMultiplier = options.highestMultiplier

	var timesTablesArray = []
	for(var i=0; i < total; i++) {
		var table = randomItemIn(timesTables)
		var multiplier = randomNumberUpTo(highestMultiplier)
		timesTablesArray.push({left: table, right: multiplier})
	}
	return timesTablesArray
}

function displayTimesTables(timesTables) {
	console.log(timesTables)
	var container = document.getElementById("container")
    var answerQuestionsContainer = document.getElementById("answerQuestionsTemplate").content.cloneNode(true)
    var questionsGoHere = answerQuestionsContainer.getElementById("questions")
    var question = document.getElementById("questionTemplate").content

	for(var i=0; i < timesTables.length; i++) {
		var sum = timesTables[i]
		// create something so we can see the sum

        var element = question.cloneNode(true)
		element.getElementById("question").innerText = sum.left + " x " + sum.right + " ="
		// add the sum to the container 
		questionsGoHere.appendChild(element)
	}

    container.appendChild(answerQuestionsContainer)
    
}

function randomItemIn(items) {
	var item = items[Math.floor(Math.random() * items.length)]
	return item
}

// BUG: 
function randomNumberUpTo(number) {
	return Math.round(number * Math.random())
}


window.onload = function() {
	generateLevelChoices()
	/*
	var options = optionsForLevel(2)
	var tables = generateTimesTables(options)
	displayTimesTables(tables)
	*/
}


// level 1 - 

</script>
</body>
</html>